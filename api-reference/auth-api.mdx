---
title: "Authentication API"
description: "Complete authentication and token management endpoints"
---

# Authentication API

The Authentication API provides secure user authentication, email verification, password management, and token handling for your applications.

<Note>
All endpoints use the base URL: `https://jethings-backend.fly.dev` (production) or `http://localhost:3000` (development)
</Note>

## üîê Authentication Flow

<Steps>
  <Step title="Sign Up">
    Create account with email verification
  </Step>
  <Step title="Verify Email">
    Enter OTP sent to email
  </Step>
  <Step title="Sign In">
    Get access and refresh tokens
  </Step>
  <Step title="Make Requests">
    Use access token in Authorization header
  </Step>
  <Step title="Refresh Token">
    Get new tokens when access token expires
  </Step>
</Steps>

## üìù User Registration

### Sign Up

Create a new user account with email verification.

<CodeGroup>
```bash cURL
curl -X POST https://jethings-backend.fly.dev/auth/signup \
  -H "Content-Type: application/json" \
  -d '{
    "firstName": "Jane",
    "lastName": "Doe",
    "email": "jane@example.com",
    "phoneNumber": "+1234567890",
    "password": "strongPass123",
    "age": 28,
    "description": "Software developer"
  }'
```

```typescript TypeScript
const response = await fetch('https://jethings-backend.fly.dev/auth/signup', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    firstName: 'Jane',
    lastName: 'Doe',
    email: 'jane@example.com',
    phoneNumber: '+1234567890',
    password: 'strongPass123',
    age: 28,
    description: 'Software developer'
  })
});

const result = await response.json();
```

```dart Flutter
final response = await http.post(
  Uri.parse('https://jethings-backend.fly.dev/auth/signup'),
  headers: {'Content-Type': 'application/json'},
  body: jsonEncode({
    'firstName': 'Jane',
    'lastName': 'Doe',
    'email': 'jane@example.com',
    'phoneNumber': '+1234567890',
    'password': 'strongPass123',
    'age': 28,
    'description': 'Software developer'
  }),
);
```
</CodeGroup>

**Request Body:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `firstName` | string | ‚úÖ | User's first name |
| `lastName` | string | ‚úÖ | User's last name |
| `email` | string | ‚úÖ | Valid email address (must be unique) |
| `phoneNumber` | string | ‚úÖ | Valid phone number (must be unique) |
| `password` | string | ‚úÖ | Minimum 6 characters |
| `age` | number | ‚úÖ | Integer between 1-120 |
| `description` | string | ‚ùå | Optional user bio |

**Success Response (200):**
```json
{
  "message": "User created, check your email for verification code"
}
```

**Error Responses:**
- `409 Conflict`: Email already exists
- `409 Conflict`: Phone number already exists
- `400 Bad Request`: Validation errors

---

### Verify Email

Verify user email with the OTP sent during signup.

<CodeGroup>
```bash cURL
curl -X POST https://jethings-backend.fly.dev/auth/verify-email \
  -H "Content-Type: application/json" \
  -d '{"otp": "123456"}'
```

```typescript TypeScript
const response = await fetch('https://jethings-backend.fly.dev/auth/verify-email', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ otp: '123456' })
});

const result = await response.json();
```

```dart Flutter
final response = await http.post(
  Uri.parse('https://jethings-backend.fly.dev/auth/verify-email'),
  headers: {'Content-Type': 'application/json'},
  body: jsonEncode({'otp': '123456'}),
);
```
</CodeGroup>

**Request Body:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `otp` | string | ‚úÖ | 6-digit verification code |

**Success Response (200):**
```json
{
  "message": "Email verified successfully"
}
```

**Error Responses:**
- `400 Bad Request`: Invalid or expired OTP
- `400 Bad Request`: Too many attempts (max 3)

<Note>
- OTP expires after 10 minutes
- Maximum 3 attempts per OTP
- OTP is automatically deleted after successful verification
</Note>

---

## üîë User Authentication

### Sign In

Authenticate user and receive access/refresh tokens.

<CodeGroup>
```bash cURL
curl -X POST https://jethings-backend.fly.dev/auth/signin \
  -H "Content-Type: application/json" \
  -d '{
    "email": "jane@example.com",
    "password": "strongPass123"
  }'
```

```typescript TypeScript
const response = await fetch('https://jethings-backend.fly.dev/auth/signin', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    email: 'jane@example.com',
    password: 'strongPass123'
  })
});

const result = await response.json();
// Store tokens securely
localStorage.setItem('refreshToken', result.refreshToken);
```

```dart Flutter
final response = await http.post(
  Uri.parse('https://jethings-backend.fly.dev/auth/signin'),
  headers: {'Content-Type': 'application/json'},
  body: jsonEncode({
    'email': 'jane@example.com',
    'password': 'strongPass123'
  }),
);

final result = jsonDecode(response.body);
// Store tokens securely
await storage.write(key: 'refreshToken', value: result['refreshToken']);
```
</CodeGroup>

**Request Body:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `email` | string | ‚úÖ | User's email address |
| `password` | string | ‚úÖ | User's password |

**Success Response (200):**
```json
{
  "message": "Signed in successfully",
  "user": {
    "id": "ck_123...",
    "email": "jane@example.com",
    "firstName": "Jane",
    "lastName": "Doe",
    "roles": ["user"]
  },
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0",
  "expiresIn": 900
}
```

**Error Responses:**
- `401 Unauthorized`: Invalid credentials
- `401 Unauthorized`: Email not verified

<Note>
- Access token expires in 15 minutes
- Refresh token expires in 7 days
- Store refresh token securely (httpOnly cookie recommended)
</Note>

---

### Get Current User

Retrieve current authenticated user's profile.

<CodeGroup>
```bash cURL
curl -X GET https://jethings-backend.fly.dev/auth/me \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

```typescript TypeScript
const response = await fetch('https://jethings-backend.fly.dev/auth/me', {
  headers: {
    'Authorization': `Bearer ${accessToken}`,
    'Content-Type': 'application/json'
  }
});

const user = await response.json();
```

```dart Flutter
final response = await http.get(
  Uri.parse('https://jethings-backend.fly.dev/auth/me'),
  headers: {
    'Authorization': 'Bearer $accessToken',
    'Content-Type': 'application/json'
  },
);
```
</CodeGroup>

**Success Response (200):**
```json
{
  "id": "ck_123...",
  "email": "jane@example.com",
  "firstName": "Jane",
  "lastName": "Doe",
  "age": 28,
  "phoneNumber": "+1234567890",
  "avatarUrl": "https://example.com/avatar.jpg",
  "description": "Software developer",
  "roles": ["user"],
  "isEmailVerified": true,
  "lastActivity": "2024-01-15T10:30:00.000Z",
  "createdAt": "2024-01-01T00:00:00.000Z",
  "updatedAt": "2024-01-15T10:30:00.000Z"
}
```

**Error Responses:**
- `401 Unauthorized`: Invalid or expired token
- `401 Unauthorized`: User not found
- `401 Unauthorized`: Account deactivated

---

## üîÑ Token Management

### Refresh Token

Get new access and refresh tokens when the current access token expires.

<CodeGroup>
```bash cURL
curl -X POST https://jethings-backend.fly.dev/auth/refresh-token \
  -H "Content-Type: application/json" \
  -d '{"refreshToken": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0"}'
```

```typescript TypeScript
const response = await fetch('https://jethings-backend.fly.dev/auth/refresh-token', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ refreshToken: storedRefreshToken })
});

const newTokens = await response.json();
// Update stored tokens
localStorage.setItem('refreshToken', newTokens.refreshToken);
```

```dart Flutter
final response = await http.post(
  Uri.parse('https://jethings-backend.fly.dev/auth/refresh-token'),
  headers: {'Content-Type': 'application/json'},
  body: jsonEncode({'refreshToken': refreshToken}),
);
```
</CodeGroup>

**Request Body:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `refreshToken` | string | ‚úÖ | Valid refresh token |

**Success Response (200):**
```json
{
  "message": "Tokens refreshed successfully",
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1",
  "expiresIn": 900
}
```

**Error Responses:**
- `401 Unauthorized`: Invalid or expired refresh token

---

### Revoke Token

Revoke a specific refresh token (logout from one device).

<CodeGroup>
```bash cURL
curl -X POST https://jethings-backend.fly.dev/auth/revoke-token \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"refreshToken": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0"}'
```

```typescript TypeScript
const response = await fetch('https://jethings-backend.fly.dev/auth/revoke-token', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${accessToken}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({ refreshToken: specificRefreshToken })
});
```

```dart Flutter
final response = await http.post(
  Uri.parse('https://jethings-backend.fly.dev/auth/revoke-token'),
  headers: {
    'Authorization': 'Bearer $accessToken',
    'Content-Type': 'application/json'
  },
  body: jsonEncode({'refreshToken': refreshToken}),
);
```
</CodeGroup>

**Success Response (200):**
```json
{
  "message": "Refresh token revoked successfully"
}
```

---

### Revoke All Tokens

Revoke all refresh tokens for the current user (logout from all devices).

<CodeGroup>
```bash cURL
curl -X POST https://jethings-backend.fly.dev/auth/revoke-all-tokens \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

```typescript TypeScript
const response = await fetch('https://jethings-backend.fly.dev/auth/revoke-all-tokens', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${accessToken}`,
    'Content-Type': 'application/json'
  }
});
```

```dart Flutter
final response = await http.post(
  Uri.parse('https://jethings-backend.fly.dev/auth/revoke-all-tokens'),
  headers: {
    'Authorization': 'Bearer $accessToken',
    'Content-Type': 'application/json'
  },
);
```
</CodeGroup>

**Success Response (200):**
```json
{
  "message": "All refresh tokens revoked successfully"
}
```

---

### Logout

Alias for revoke-all-tokens (logout from all devices).

<CodeGroup>
```bash cURL
curl -X POST https://jethings-backend.fly.dev/auth/logout \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

```typescript TypeScript
const response = await fetch('https://jethings-backend.fly.dev/auth/logout', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${accessToken}`,
    'Content-Type': 'application/json'
  }
});
```

```dart Flutter
final response = await http.post(
  Uri.parse('https://jethings-backend.fly.dev/auth/logout'),
  headers: {
    'Authorization': 'Bearer $accessToken',
    'Content-Type': 'application/json'
  },
);
```
</CodeGroup>

**Success Response (200):**
```json
{
  "message": "All refresh tokens revoked successfully"
}
```

---

## üîí Password Management

### Request Password Reset

Request a password reset OTP to be sent to user's email.

<CodeGroup>
```bash cURL
curl -X POST https://jethings-backend.fly.dev/auth/request-password-reset \
  -H "Content-Type: application/json" \
  -d '{"email": "jane@example.com"}'
```

```typescript TypeScript
const response = await fetch('https://jethings-backend.fly.dev/auth/request-password-reset', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ email: 'jane@example.com' })
});

const result = await response.json();
```

```dart Flutter
final response = await http.post(
  Uri.parse('https://jethings-backend.fly.dev/auth/request-password-reset'),
  headers: {'Content-Type': 'application/json'},
  body: jsonEncode({'email': 'jane@example.com'}),
);
```
</CodeGroup>

**Request Body:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `email` | string | ‚úÖ | User's email address |

**Success Response (200):**
```json
{
  "message": "If that email exists, a reset code was sent"
}
```

<Note>
Always returns this message to prevent email enumeration attacks.
</Note>

---

### Verify Password Reset

Reset password using the OTP sent to user's email.

<CodeGroup>
```bash cURL
curl -X POST https://jethings-backend.fly.dev/auth/verify-password-reset \
  -H "Content-Type: application/json" \
  -d '{
    "otp": "123456",
    "newPassword": "newStrongPass456"
  }'
```

```typescript TypeScript
const response = await fetch('https://jethings-backend.fly.dev/auth/verify-password-reset', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    otp: '123456',
    newPassword: 'newStrongPass456'
  })
});

const result = await response.json();
```

```dart Flutter
final response = await http.post(
  Uri.parse('https://jethings-backend.fly.dev/auth/verify-password-reset'),
  headers: {'Content-Type': 'application/json'},
  body: jsonEncode({
    'otp': '123456',
    'newPassword': 'newStrongPass456'
  }),
);
```
</CodeGroup>

**Request Body:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `otp` | string | ‚úÖ | 6-digit reset code |
| `newPassword` | string | ‚úÖ | New password (min 6 characters) |

**Success Response (200):**
```json
{
  "message": "Password reset successful"
}
```

**Error Responses:**
- `400 Bad Request`: Invalid or expired OTP
- `400 Bad Request`: Too many attempts (max 3)

---

## üõ†Ô∏è Development Endpoints

### Create Super Admin (Development Only)

Create a super admin account for development purposes.

<Warning>
This endpoint is only available when `NODE_ENV=development`
</Warning>

<CodeGroup>
```bash cURL
curl -X POST https://jethings-backend.fly.dev/auth/dev/super-admin \
  -H "Content-Type: application/json" \
  -d '{
    "firstName": "Super",
    "lastName": "Admin",
    "email": "superadmin@example.com",
    "password": "superSecurePassword123",
    "phoneNumber": "+1234567890",
    "age": 35,
    "description": "Development super administrator"
  }'
```

```typescript TypeScript
const response = await fetch('https://jethings-backend.fly.dev/auth/dev/super-admin', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    firstName: 'Super',
    lastName: 'Admin',
    email: 'superadmin@example.com',
    password: 'superSecurePassword123',
    phoneNumber: '+1234567890',
    age: 35,
    description: 'Development super administrator'
  })
});

const result = await response.json();
```

```dart Flutter
final response = await http.post(
  Uri.parse('https://jethings-backend.fly.dev/auth/dev/super-admin'),
  headers: {'Content-Type': 'application/json'},
  body: jsonEncode({
    'firstName': 'Super',
    'lastName': 'Admin',
    'email': 'superadmin@example.com',
    'password': 'superSecurePassword123',
    'phoneNumber': '+1234567890',
    'age': 35,
    'description': 'Development super administrator'
  }),
);
```
</CodeGroup>

**Request Body:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `firstName` | string | ‚úÖ | Super admin's first name |
| `lastName` | string | ‚úÖ | Super admin's last name |
| `email` | string | ‚úÖ | Valid email address (must be unique) |
| `password` | string | ‚úÖ | Minimum 6 characters |
| `phoneNumber` | string | ‚úÖ | Valid phone number (must be unique) |
| `age` | number | ‚úÖ | Integer between 1-120 |
| `description` | string | ‚ùå | Optional description |

**Success Response (200):**
```json
{
  "message": "Super admin created successfully (Development Only)",
  "admin": {
    "id": "ck_789...",
    "email": "superadmin@example.com",
    "firstName": "Super",
    "lastName": "Admin",
    "age": 35,
    "phoneNumber": "+1234567890",
    "avatarUrl": null,
    "description": "Development super administrator",
    "roles": ["super_admin"],
    "isEmailVerified": true,
    "isActive": true,
    "lastActivity": null,
    "createdAt": "2024-01-15T12:00:00.000Z",
    "updatedAt": "2024-01-15T12:00:00.000Z",
    "isAdmin": false,
    "isSuperAdmin": true
  }
}
```

**Error Responses:**
- `403 Forbidden`: Endpoint only available in development
- `409 Conflict`: Email already exists
- `409 Conflict`: Phone number already exists

---

## üîß Error Handling

### Common Error Codes

| Status Code | Description | Common Causes |
|-------------|-------------|---------------|
| `400 Bad Request` | Invalid request data | Validation errors, malformed JSON |
| `401 Unauthorized` | Authentication required | Missing/invalid token, expired token |
| `403 Forbidden` | Insufficient permissions | Wrong role, development-only endpoint |
| `404 Not Found` | Resource not found | Invalid endpoint, missing resource |
| `409 Conflict` | Resource conflict | Email/phone already exists |
| `500 Internal Server Error` | Server error | Database issues, unexpected errors |

### Error Response Format

```json
{
  "message": "Error description",
  "statusCode": 400
}
```

### Handling Errors in Your Code

<CodeGroup>
```typescript TypeScript
try {
  const response = await fetch('https://jethings-backend.fly.dev/auth/signin', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ email, password })
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Authentication failed');
  }

  const data = await response.json();
  // Handle success
} catch (error) {
  console.error('Auth error:', error.message);
  // Handle error
}
```

```dart Flutter
try {
  final response = await http.post(
    Uri.parse('https://jethings-backend.fly.dev/auth/signin'),
    headers: {'Content-Type': 'application/json'},
    body: jsonEncode({'email': email, 'password': password}),
  );

  if (response.statusCode == 200) {
    final data = jsonDecode(response.body);
    // Handle success
  } else {
    final error = jsonDecode(response.body);
    throw Exception(error['message'] ?? 'Authentication failed');
  }
} catch (e) {
  print('Auth error: $e');
  // Handle error
}
```
</CodeGroup>

---

## üöÄ Next Steps

Now that you understand the Authentication API, explore the [Users API](/api-reference/users-api) for user management features, or check out our [Flutter Integration Guide](/api-reference/flutter-integration) for mobile development.

<CardGroup cols={2}>
  <Card title="Users API" icon="users" href="/api-reference/users-api">
    User management, search, and admin operations
  </Card>
  <Card title="Flutter Integration" icon="mobile" href="/api-reference/flutter-integration">
    Complete Flutter implementation guide
  </Card>
</CardGroup>